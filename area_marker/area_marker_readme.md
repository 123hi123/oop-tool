# 區域標記工具

## 簡介
區域標記工具是一個用於在圖片上標記特定區域的應用程序。您可以使用它來標記"不能放的"區域和"水路"區域，並將這些標記導出為特定格式的數據。

## 功能
- 導入任意圖片作為標記基礎
- 以圖片中心為原點(0,0)的坐標系
- 使用兩點點擊方式繪製矩形區域（自動排序為左上到右下）
- 支持移動已繪製的矩形
- 支持 Ctrl+Z 撤銷操作
- 切換標記區域類型（不能放的/水路）
- 實時顯示鼠標位置的世界坐標
- 刪除最後一個標記的區域
- 清除所有標記區域
- 導出標記數據為兩種不同格式的文本文件
- 支持快速複製 Raw 數據到剪貼板
- 自動記錄操作日誌

## 使用方法
1. 啟動程序：
   ```
   python area_marker_tool.py
   ```

2. 載入圖片：
   - 點擊"載入圖片"按鈕
   - 選擇要標記的圖片
   - 圖片將以原始大小顯示，中心點設為世界坐標(0,0)

3. 選擇繪畫狀態：
   - "繪製方塊"：允許您通過點擊兩個點來繪製矩形
   - "移動方塊"：允許您選擇並移動已繪製的矩形

4. 標記區域：
   - 從下拉菜單選擇區域類型（"不能放的"或"水路"）
   - 確保選擇"繪製方塊"模式
   - 點擊兩個點來定義矩形（無論點擊順序如何，程序都會自動將點排序為左上和右下）
   - 紅色矩形表示"不能放的"區域
   - 藍色矩形表示"水路"區域
   - 每個矩形上會顯示其世界坐標

5. 移動矩形：
   - 選擇"移動方塊"模式
   - 點擊要移動的矩形
   - 按住鼠標左鍵並拖動
   - 被選中的矩形會顯示綠色邊框

6. 修改標記：
   - 點擊"刪除最後一個區域"按鈕刪除最後標記的區域
   - 點擊"撤銷操作 (Ctrl+Z)"按鈕或按 Ctrl+Z 撤銷上一步操作
   - 點擊"清除所有區域"按鈕刪除所有標記

7. 導出/複製數據：
   - 完成標記後，您可以：
     1. 點擊"導出數據"按鈕，選擇保存位置和文件名（例如 "data.txt"）
        - 程序會自動生成兩個文件：
          1. 原始文件名（例如 "data.txt"）：帶有C++前綴的完整格式
             ```
             std::vector<std::vector<std::vector<glm::vec2>>>={{{glm::vec2(x1, y1),glm::vec2(x2, y2)},...},{{glm::vec2(x1, y1),glm::vec2(x2, y2)},...}}
             ```
          2. 帶有"_raw"後綴的文件（例如 "data_raw.txt"）：不帶前綴的純數據格式
             ```
             {{{glm::vec2(x1, y1),glm::vec2(x2, y2)},...},{{glm::vec2(x1, y1),glm::vec2(x2, y2)},...}}
             ```
     2. 點擊"複製 Raw 數據到剪貼板"按鈕，直接將純數據格式複製到剪貼板
   - 所有輸出的座標點都按照左上到右下的順序排列
   - 第一層數組包含兩個元素：第一個是"不能放的"區域數組，第二個是"水路"區域數組
   - 每個區域數組包含多個矩形
   - 每個矩形由兩個對角點的坐標定義（左上角和右下角）

## 坐標系統
- 使用以圖片中心為原點(0,0)的坐標系
- X軸向右為正，向左為負
- Y軸向上為正，向下為負
- 坐標值與圖片像素相對應

## 快捷鍵
- Ctrl+Z：撤銷上一步操作

## 日誌記錄
- 所有操作都會自動記錄到 log.md 文件中
- 日誌按日期和時間組織
- 可用於追蹤項目進展和回溯操作歷史 